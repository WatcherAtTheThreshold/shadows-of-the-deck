<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Shadows in the Deck - Mockup</title>
<style>
  body { font-family: sans-serif; background: #111; color: #eee; text-align: center; }
  #game { max-width: 900px; margin: auto; }
  #market, #player-hand { display: flex; justify-content: center; margin: 10px 0; }
  .card { background: #333; border: 2px solid #666; border-radius: 8px; width: 100px; height: 140px; margin: 5px; display: flex; align-items: center; justify-content: center; cursor: pointer; }
  .card:hover { border-color: gold; }
  #map { display: flex; justify-content: center; margin: 20px 0; }
  .node { width: 40px; height: 40px; border-radius: 50%; background: #555; margin: 5px; position: relative; }
  .player { width: 20px; height: 20px; border-radius: 50%; background: cyan; position: absolute; top: 10px; left: 10px; }
  #log { background: #222; padding: 10px; min-height: 60px; margin-top: 20px; border-radius: 6px; }
</style>
</head>
<body>
<div id="game">
  <h1>Shadows in the Deck</h1>

  <h2>Market</h2>
  <div id="market"></div>

  <h2>Your Hand</h2>
  <div id="player-hand"></div>

  <h2>Dream Map</h2>
  <div id="map"></div>

  <div id="log">Welcome to the game!</div>
</div>

<script>
// --- SIMPLE MOCK DATA ---
let marketDeck = ["Focus +2", "Move +2", "Fragment 3pts", "Shadow Blocker", "Focus +3", "Move +3"];
let playerDeck = ["Focus +1","Focus +1","Focus +1","Focus +1","Focus +1","Focus +1","Focus +1","Move +1","Move +1","Move +1"];
let discardPile = [];
let playerHand = [];
let marketRow = [];
let mapNodes = 6;
let playerPos = 0;

// --- INIT ---
function initGame(){
  // Fill market
  for (let i=0; i<5; i++) {
    drawMarketCard();
  }
  renderMarket();
  drawHand();
  renderHand();
  renderMap();
}

// --- DRAW FUNCTIONS ---
function drawMarketCard(){
  if(marketDeck.length>0){
    marketRow.push(marketDeck.shift());
  }
}

function drawHand(){
  while(playerHand.length < 5 && playerDeck.length>0){
    playerHand.push(playerDeck.shift());
  }
  if(playerDeck.length===0 && discardPile.length>0){
    playerDeck = discardPile;
    discardPile = [];
  }
}

// --- RENDER FUNCTIONS ---
function renderMarket(){
  let m = document.getElementById('market');
  m.innerHTML = '';
  marketRow.forEach((card, i)=>{
    let el = document.createElement('div');
    el.className = 'card';
    el.textContent = card;
    el.onclick = ()=>{
      logMsg(`Bought ${card}`);
      discardPile.push(card);
      marketRow.splice(i,1);
      drawMarketCard();
      renderMarket();
    };
    m.appendChild(el);
  });
}

function renderHand(){
  let h = document.getElementById('player-hand');
  h.innerHTML = '';
  playerHand.forEach((card, i)=>{
    let el = document.createElement('div');
    el.className = 'card';
    el.textContent = card;
    el.onclick = ()=>{
      logMsg(`Played ${card}`);
      if(card.includes('Move')){
        movePlayer(parseInt(card.replace(/\D/g,'')));
      }
      discardPile.push(card);
      playerHand.splice(i,1);
      renderHand();
    };
    h.appendChild(el);
  });
}

function renderMap(){
  let map = document.getElementById('map');
  map.innerHTML = '';
  for(let i=0; i<mapNodes; i++){
    let node = document.createElement('div');
    node.className = 'node';
    if(i===playerPos){
      let p = document.createElement('div');
      p.className = 'player';
      node.appendChild(p);
    }
    map.appendChild(node);
  }
}

// --- GAME ACTIONS ---
function movePlayer(steps){
  playerPos = Math.min(playerPos + steps, mapNodes-1);
  renderMap();
}

function logMsg(msg){
  document.getElementById('log').textContent = msg;
}

// --- START GAME ---
initGame();
</script>
</body>
</html>
